{{ if not .Values.vexa.existingSecret }}
apiVersion: v1
kind: Secret
metadata:
  name: {{ include "vexa-lite.secretName" . }}
  labels:
{{ include "vexa-lite.labels" . | nindent 4 }}
type: Opaque
stringData:
  DATABASE_URL: {{ required "vexa.databaseUrl is required (or set vexa.existingSecret)" .Values.vexa.databaseUrl | quote }}
  ADMIN_API_TOKEN: {{ required "vexa.adminApiToken is required (or set vexa.existingSecret)" .Values.vexa.adminApiToken | quote }}
  TRANSCRIBER_API_KEY: {{ required "vexa.transcriberApiKey is required (or set vexa.existingSecret)" .Values.vexa.transcriberApiKey | quote }}
{{ range $key, $val := .Values.vexa.extraSecretEnv }}
  {{ $key }}: {{ $val | quote }}
{{ end }}
{{ end }}
